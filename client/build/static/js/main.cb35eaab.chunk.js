(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(e,t,n){},22:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),o=n.n(c),u=n(8),i=n.n(u),s=(n(17),n(4)),l=(n(22),n(3)),d=n(12),p=n(7),f=n(2),j=n.n(f),b=n(6),O=n(5),h=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"post",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:n,headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=Object(O.b)("usersignup",function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/signup",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=Object(O.b)("usersignin",function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/signin",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(O.c)({name:"user",initialState:{token:"",loading:!1,error:""},reducers:{addToken:function(e,t){e.token=localStorage.getItem("token")},logOut:function(e,t){e.token=null,localStorage.removeItem("token")}},extraReducers:(r={},Object(l.a)(r,m.fulfilled,(function(e,t){var n=t.payload,r=n.error,a=n.message;e.loading=!1,e.error=r||a})),Object(l.a)(r,m.pending,(function(e,t){e.loading=!0})),Object(l.a)(r,g.pending,(function(e,t){e.loading=!0})),Object(l.a)(r,g.fulfilled,(function(e,t){var n=t.payload,r=n.error,a=n.token;e.loading=!1,r?e.error=r:(e.token=a,localStorage.setItem("token",a))})),r)}),k=x.actions,w=k.addToken,y=k.logOut,S=x.reducer,C=n(1),N=function(){var e=Object(c.useState)({email:"",password:""}),t=Object(p.a)(e,2),n=t[0],r=t[1],a=n.email,o=n.password,u=Object(c.useState)("Signin"),i=Object(p.a)(u,2),f=i[0],j=i[1],b=Object(s.c)((function(e){return e.user})),O=b.loading,h=b.error,v=Object(s.b)(),x=function(e){var t=e.target,n=t.name,a=t.value;r((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(l.a)({},n,a))}))};return Object(C.jsxs)("div",{children:[O&&Object(C.jsx)("div",{className:"progress",children:Object(C.jsx)("div",{className:"indeterminate"})}),Object(C.jsxs)("h1",{children:["Please ",f]}),h&&Object(C.jsx)("h4",{children:h}),Object(C.jsx)("input",{type:"text",onChange:x,name:"email",value:n.email,placeholder:"Please enter username"}),Object(C.jsx)("input",{type:"password",onChange:x,name:"password",value:n.password,placeholder:"Please enter password"}),"Signin"===f?Object(C.jsx)("h6",{onClick:function(){return j("Signup")},children:"Don't have an account"}):Object(C.jsx)("h6",{onClick:function(){return j("Signin")},children:"Already have an account"}),Object(C.jsx)("button",{className:"btn #f50057 pink accent-3",onClick:function(e){e.preventDefault(),v("Signin"===f?g({email:a,password:o}):m({email:a,password:o}))},children:f})]})},A=Object(O.b)("createtodo",function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/createtodo",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=Object(O.b)("fetchtodo",Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/gettodos","get");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),T=Object(O.b)("deletetodo",function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/remove/".concat(t),"delete");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=Object(O.c)({name:"todo",initialState:[],reducers:{},extraReducers:(a={},Object(l.a)(a,A.fulfilled,(function(e,t){var n=t.payload.message;n&&e.push(n)})),Object(l.a)(a,I.fulfilled,(function(e,t){return t.payload.message})),Object(l.a)(a,T.fulfilled,(function(e,t){var n=t.payload.message;return e.filter((function(e){return e._id!==n._id}))})),a)}).reducer,E=function(){var e=Object(c.useState)(""),t=Object(p.a)(e,2),n=t[0],r=t[1],a=Object(s.b)(),o=Object(s.c)((function(e){return e.todos}));return Object(c.useEffect)((function(){a(I())}),[]),Object(C.jsxs)("div",{children:[Object(C.jsx)("input",{type:"text",placeholder:"Add todo...",value:n,onChange:function(e){return r(e.target.value)}}),Object(C.jsx)("button",{className:"btn #f50057 pink accent-3",onClick:function(){return a(A({todo:n})),void r("")},children:"Add"}),Object(C.jsx)("ul",{class:"collection with-header",children:o.map((function(e){return Object(C.jsx)("li",{onClick:function(){return t=e._id,void a(T(t));var t},className:"collection-item",children:e.todo},e._id)}))}),Object(C.jsx)("button",{className:"btn #f50057 pink accent-3",onClick:function(){return a(y())},children:"LogOut"})]})};var J=function(){var e=Object(s.c)((function(e){return e.user})).token,t=Object(s.b)();return Object(c.useEffect)((function(){t(w())}),[]),Object(C.jsx)("div",{className:"App",children:e?Object(C.jsx)(E,{}):Object(C.jsx)(N,{})})},P=Object(O.a)({reducer:{user:S,todos:_}});i.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(s.a,{store:P,children:Object(C.jsx)(J,{})})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.cb35eaab.chunk.js.map